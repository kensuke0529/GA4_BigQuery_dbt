version: 2

models:
  - name: stg_events
    description: "One row per GA4 event (core fields only), filtered by _TABLE_SUFFIX in the model SQL."
    columns:
      - name: event_date
        description: "Event date as DATE."
        tests:
          - not_null

      - name: event_ts
        description: "Event timestamp as TIMESTAMP."
        tests:
          - not_null

      - name: event_name
        description: "GA4 event name (e.g., view_item, add_to_cart, purchase)."
        tests:
          - not_null

      - name: user_pseudo_id
        description: "Anonymous GA4 user identifier."
        tests:
          - not_null

  - name: stg_event_params
    description: "One row per GA4 event parameter (core fields only), filtered by _TABLE_SUFFIX in the model SQL."
    columns:
      - name: event_date
        description: "Event date as DATE."
        tests:
          - not_null

      - name: event_ts
        description: "Event timestamp as TIMESTAMP."
        tests:
          - not_null

      - name: event_name
        description: "GA4 event name (e.g., view_item, add_to_cart, purchase)."
        tests:
          - not_null

      - name: user_pseudo_id
        description: "Anonymous GA4 user identifier."
        tests:
          - not_null

  - name: stg_items
    description: "One row per GA4 event parameter (core fields only), filtered by _TABLE_SUFFIX in the model SQL."
    columns:
      - name: event_date
        description: "Event date as DATE."
        tests:
          - not_null

      - name: event_ts
        description: "Event timestamp as TIMESTAMP."
        tests:
          - not_null

      - name: event_name
        description: "GA4 event name (e.g., view_item, add_to_cart, purchase)."
        tests:
          - not_null

      - name: user_pseudo_id
        description: "Anonymous GA4 user identifier."
        tests:
          - not_null

  - name: stg_event_param_pivot
    description: "Pivoted event parameters - one row per event with commonly used GA4 parameters as columns."
    columns:
      - name: event_id
        description: "Unique event identifier (hash of user_pseudo_id, event_timestamp, event_name)."
        tests:
          - unique
          - not_null

      - name: event_date
        description: "Event date as DATE."
        tests:
          - not_null

      - name: event_ts
        description: "Event timestamp as TIMESTAMP."
        tests:
          - not_null

      - name: user_pseudo_id
        description: "Anonymous GA4 user identifier."
        tests:
          - not_null

      - name: ga_session_id
        description: "GA4 session ID (from event parameters)."

      - name: ga_session_number
        description: "GA4 session number for the user (from event parameters)."

      - name: page_location
        description: "Full URL of the page (from event parameters)."

      - name: page_referrer
        description: "Referrer URL (from event parameters)."

      - name: transaction_id
        description: "E-commerce transaction ID (from event parameters)."

      - name: value
        description: "Event value, typically revenue (from event parameters)."

      - name: currency
        description: "Currency code for the event value (from event parameters)."